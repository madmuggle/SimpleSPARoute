<!doctype html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<link rel="icon" type="image/x-icon" href="data:;base64,=">
	<style>
.link {
	color: blue;
}
.link:hover {
	text-decoration: underline;
}
	</style>
</head>

<body>
	<div id="root"></div>
<script>
const pages = { "/page1": page1, "/page2": page2, "/page3": page3 };


function page1() {
	return `
		<h1>This is Page1, Click the link to go to page 2</h1>
		Click the link to next page: ${newLink('/page2')}
		<hr>
	`;
}

function page2() {
	return `
		<h1>This is Page2, Click the link to go to page 3</h1>
		Click the link to next page: ${newLink('/page3')}
	`;
}

function page3() {
	return `
		<h1>This is Page3, Click the link to go to page 1</h1>
		Click the link to next page: ${newLink('/page1')}
	`;
}

function newLink(url) {
	return `<span class="link" onclick="jump('${url}');">${url}</span>`;
}

function renderPage(url) {
	document.querySelector('#root').innerHTML = pages[url]();
}

function jump(url) {
	history.pushState({ name: 'blah' }, '', url);
	renderPage(url);
}

window.onpopstate = () => renderPage(document.location.pathname);

const currentPath = document.location.pathname;
if (Object.keys(pages).some(x => x == currentPath))
	renderPage(currentPath);
else
	renderPage('/page1');

</script>
</body>
</html>
